---
title: Understanding and Mitigating Code Data Shifts in Deep Learning-based Code Analysis
layout: default
---

<h2 id="description">Description</h2>
We systematically study the effect of three common real-world code data shifts on DL software performance.
We also investigate the quality of existing state-of-the-art uncertainty approaches in terms of code analysis input validation under data shifts and provide large-scale benchmarks of their performance.
Below is the illustration of three code data shifts:
<p style="text-align:center;"><img name="figure0" src="Figure/code_shift.png" width="70%" height="70%">

<br/>

<h2 id="overview">Study overview</h2>
Below is the illustration of our study overview:
<p style="text-align:center;"></p><img name="figure1" src="Figure/overview.png" width="100%" height="100%">

<br/>

<h2 id="code analysis">Code analysis architecture</h2>
Below is an example of the code analysis architecture for Method Name Prediction (MNP) task:
<p style="text-align:center;"></p><img name="figure2" src="Figure/code_analysis.png" width="50%" height="50%">

<br/>

<h2 id="figures">Model performance under three code data shifts with varying shift intensities (old version)</h2>
* In the old version, we use three models (Code2Vec, CodeBERTa, GraphCodeBERT) for Method Name Prediction, and another three models (CodeRNN, CodeBERT, CodeGPT) for Code Completion.
<div style="display:flex; justify-content:space-around; align-items:center;">
    <div>
        <img name="figure1" src="Figure/method_name_prediction.png" width="100%" height="100%">
    </div>

    <div>
        <img name="figure2" src="Figure/code_completion.png" width="100%" height="100%">
    </div>
</div>

<label for="figure1">Figure 1 & 2: F-1 scores across the three models on the MNP task (left) and on the CC task (right).</label>
<br/>


<h2 id="figures">Model performance under three code data shifts with varying shift intensities (LLM version)</h2>
* In the LLM version, we use three LLMs (open_llama_13b, gpt-neox-20b, xlm-roberta-xxl) for both MNP and CC tasks.
<div style="display:flex; justify-content:space-around; align-items:center;">
    <div>
        <img name="figure3" src="Figure/method_name_prediction_llm.png" width="100%" height="100%">
    </div>

    <div>
        <img name="figure4" src="Figure/code_completion_llm.png" width="100%" height="100%">
    </div>
</div>

<label for="figure2">Figure 3 & 4: F-1 scores across the three LLMs on the MNP task (left) and on the CC task (right).</label>
<br/>


<h2 id="figures">Misclassification prediction (old version)</h2>
<p style="text-align:left;"><img name="figure5" src="Figure/cs_miscls_detect_old.png" width="100%" height="100%">
<label  for="figure3">Figure 5: AUC, AUPR, and Brier scores for the five uncertainties on the MNP task.</label>
<br/>
<p style="text-align:left;"><img name="figure4" src="Figure/cc_miscls_detect_old.png" width="100%" height="100%">
<label  for="figure4">Figure 6: AUC, AUPR, and Brier scores for the five uncertainties on the CC task.</label>
<br/>

<h2 id="figures">Misclassification prediction (current version)</h2>
* In the current version, we use all six models (Code2Vec, CodeBERTa, GraphCodeBERT, CodeRNN, CodeBERT, CodeGPT) for both MNP and CC tasks.
<p style="text-align:left;"><img name="figure5" src="Figure/cs_miscls_detect_aupr.png" width="100%" height="100%">
<label  for="figure5">Figure 7: AUPR scores for the five uncertainties on the MNP task.</label>
<br/>
<p style="text-align:left;"><img name="figure4" src="Figure/cc_miscls_detect_aupr.png" width="100%" height="100%">
<label  for="figure6">Figure 8: AUPR scores for the five uncertainties on the CC task.</label>
<br/>

<h2 id="figures">Misclassification prediction (LLM version)</h2>
<p style="text-align:left;"><img name="figure7" src="Figure/cs_miscls_detect_llm.png" width="100%" height="100%">
<label  for="figure7">Figure 9: AUC, AUPR, and Brier scores for the five uncertainties on the MNP task.</label>
<br/>
<p style="text-align:left;"><img name="figure4" src="Figure/cc_miscls_detect_llm.png" width="100%" height="100%">
<label  for="figure8">Figure 10: AUC, AUPR, and Brier scores for the five uncertainties on the CC task.</label>
<br/>

<h2 id="figures">Input validation (old version)</h2>
<p style="text-align:left;"><img name="figure6" src="Figure/filter_cs.png" width="100%" height="100%">
<label  for="figure9">Figure 11: Input validation for in-distribution and shifted code samples on the MNP task.</label>
<br/>
<p style="text-align:left;"><img name="figure7" src="Figure/filter_cc.png" width="100%" height="100%">
<label  for="figure10">Figure 12: Input validation for in-distribution and shifted code samples on the CC task.</label>
<br/>

<h2 id="figures">Misclassification prediction for case study (old version)</h2>
<p style="text-align:left;"><img name="figure8" src="Figure/case_cs_old.png" width="100%" height="100%">
<label  for="figure11">Figure 13: AUC, AUPR, and Brier scores for the five uncertainties on the MNP task.</label>
<br/>
<p style="text-align:left;"><img name="figure9" src="Figure/case_cc_old.png" width="100%" height="100%">
<label  for="figure12">Figure 14: AUC, AUPR, and Brier scores for the five uncertainties on the CC task.</label>
<br/>

<h2 id="figures">Input validation for case study (old version)</h2>

<div style="display:flex; justify-content:space-around; align-items:center;">
    <div>
        <img name="figure13" src="Figure/filter_cs_study.png" width="100%" height="100%">
    </div>

    <div>
        <img name="figure14" src="Figure/filter_cc_study.png" width="100%" height="100%">
    </div>
</div>

<label for="figure13">Figure 15 & 16: Input validation for in-distribution and shifted code samples on the MNP task (left) and on the CC task (right).</label>
<br/>








